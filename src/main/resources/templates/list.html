<!DOCTYPE html>
<html lang="ja" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>配当履歴一覧</title>
</head>
<body>
    <h1>配当履歴一覧画面</h1>
    <p><a th:href="@{/index}">TOP画面</a></p>
    <form th:action="@{/list/insert}" method="post">
        <div><label>ティッカー：<input type="text" name="tickerSymbol"/></label></div><!-- TODO:バリデーション作成 -->
        <div><label>配当金額　：<input type="number" step="0.01" name="amountReceived"/></label></div>
        <div><label>受取年月　：<input type="date" name="receiptDate"/></label></div>
        <div><input type="submit" value="Insert"/></div>
    </form>
    <br>
    <form th:action="@{/list/csvInsert}" method="post" enctype="multipart/form-data">
        <div>楽天証券の配当金・分配金一覧CSVファイルを選択してください。</div>
        <div>一括登録をします。<input type="file" name="csvFile" accept=".csv"></div>
        <div>例）dividendlist_20210111.csv</div>
        <div><input type="submit" value="アップロード"/></div>
    </form>
    <br>
    <!-- ↓ページネーション -->
    <div>
        <ul>
            <li th:if="${!dividendHistoryPage.first}" style="display:inline;">
                <a th:href="@{/list(page=${dividendHistoryPage.number - 1})}">&lt;&lt;前</a>
            </li>

            <th:block th:each="pageNo : ${#numbers.sequence(0, dividendHistoryPage.totalPages - 1)}">
                <li style="display:inline; margin-left:10px;">
                    <th:block th:if="${pageNo == dividendHistoryPage.number}">
                        <span th:text="${pageNo + 1}">1</span>
                    </th:block>
                    <th:block th:if="${pageNo != dividendHistoryPage.number}">
                        <a th:href="@{/list(page=${pageNo})}">
                            <span th:text="${pageNo + 1}">1</span>
                        </a>
                    </th:block>
                </li>
            </th:block>

            <li th:if="${!dividendHistoryPage.last}" style="display:inline; margin-left:10px;">
                <a th:href="@{/list(page=${dividendHistoryPage.number + 1})}">次&gt;&gt;</a>
            </li>
        </ul>
    </div>
    <!-- ↓一覧表 -->
    <table  border="1" cellspacing = "0">
        <tr>
            <th>ID</th>
            <th>ティッカーシンボル</th>
            <th>配当金額</th>
            <th>受取年月</th>
        </tr>
        <tr th:each="dividendHistory : ${dividendHistories}">
            <td th:text="${dividendHistory.getId()}"></td>
            <td th:text="${dividendHistory.getTickerSymbol()}"></td>
            <td th:text="${dividendHistory.getAmountReceived()}"></td>
            <td th:text="${dividendHistory.getReceiptDate()}"></td>
        </tr>
    </table>
    <form th:action="@{/logout}" method="post">
        <input type="submit" value="Sign Out"/>
    </form>
</body>
</html>
